{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://example.com/chat_protocol.schema.json",
    "title": "JSON Chat Protocol",
    "description": "A schema defining the structure of messages exchanged between client and server",
    "type": "object",
    "properties": {
      "request_type": {
        "description": "The type of request being made",
        "type": "string",
        "enum": [
          "SendMessage",
          "CreateAccount",
          "DeleteAccount",
          "UserLogin",
          "ReadMessage",
          "DeleteMessages"
        ]
      },
      "timestamp": {
        "description": "The timestamp of the request",
        "type": "string",
        "format": "date-time"
      },
      "user_data": {
        "description": "User authentication details",
        "type": "object",
        "properties": {
          "username": {
            "description": "The username of the user",
            "type": "string"
          },
          "password": {
            "description": "Hashed password of the user",
            "type": "string"
          }
        },
        "required": ["username", "password"]
      },
      "data": {
        "description": "Additional data specific to the request type",
        "type": "object",
        "properties": {
          "sender": {
            "description": "The sender of the message",
            "type": "string"
          },
          "receiver": {
            "description": "The receiver of the message",
            "type": "string"
          },
          "message": {
            "description": "The message content",
            "type": "string"
          },
          "limit": {
            "description": "The number of messages to retrieve",
            "type": "integer",
            "minimum": 1
          },
          "message_ids": {
            "description": "List of message IDs to delete",
            "type": "array",
            "items": {
              "type": "string"
            },
            "minItems": 1,
            "uniqueItems": true
          }
        }
      }
    },
    "required": ["request_type", "timestamp"],
    "dependentRequired": {
      "CreateAccount": ["user_data"],
      "DeleteAccount": ["user_data"],
      "UserLogin": ["user_data"],
      "SendMessage": ["data"],
      "ReadMessage": ["data"],
      "DeleteMessages": ["data"]
    }
  }
  